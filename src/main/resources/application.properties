spring.application.name=segari-service
spring.threads.virtual.enabled=true
server.port=54124

# Custom banner
spring.banner.location=classpath:banner.txt

# Application metadata
app.version=@app.version@
app.name=@app.name@
app.vendor=@app.vendor@
app.description=@app.description@

# WebSocket configuration
websocket.topic.print=/broker/warehouse-printers
websocket.reconnect.interval.ms=2000

# Suppress favicon.ico not found errors
spring.mvc.log-resolved-exception=false

# Graceful shutdown settings
spring.lifecycle.timeout-per-shutdown-phase=5s
server.shutdown=graceful

# Logging configuration
logging.level.root=INFO
logging.level.id.segari.service=DEBUG
logging.level.org.hibernate.orm.connections.pooling=WARN

# H2 Database Configuration (File-based)
# AUTO_SERVER=TRUE allows multiple connections (Spring Boot + DataGrip simultaneously)
# DATABASE_TO_UPPER=FALSE preserves table/column name case
# Database location: Use APP_DATA_DIR env var, fallback to ./data for dev
spring.datasource.url=jdbc:h2:file:${APP_DATA_DIR:./data}/segari;AUTO_SERVER=TRUE;DATABASE_TO_UPPER=FALSE
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# HikariCP Connection Pool Configuration
spring.datasource.hikari.pool-name=SegariHikariPool
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.auto-commit=true

# H2 Console (disabled - use DataGrip instead)
spring.h2.console.enabled=false
# spring.h2.console.path=/h2-console

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.globally_quoted_identifiers=true

# Flyway Configuration
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
spring.flyway.baseline-version=0
spring.flyway.locations=classpath:db/migration

# AOT & Startup Optimization
# Disable JMX for faster startup
spring.jmx.enabled=false
# Reduce log details during startup
spring.mvc.log-request-details=false
